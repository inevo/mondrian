<html>
<!--
  == $Id$
  == This software is subject to the terms of the Common Public License
  == Agreement, available at the following URL:
  == http://www.opensource.org/licenses/cpl.html.
  == Copyright (C) 2006-2006 Julian Hyde
  == All Rights Reserved.
  == You must accept the terms of that agreement to use this software.
  -->
<head>
    <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
	<title>Pentaho Analysis Services: Configuration Guide</title>
</head>
<body>
<!-- doc2web start -->

<!-- page title -->
<div class="contentheading">Configuration Guide</div>
<!-- end page title -->

<!--
########################
##  Contents       #####
######################## -->
<h3>Contents</h3>

<ol>
	<li><a href="#Properties">Properties</a></li>
		<ol>
			<li><a href="#Property_list">Property list</a></li>
    	</ol>
    <li><a href="#Connect_strings">Connect strings</a></li>
		<ol>
			<li><a href="#Connect_string_syntax">Syntax</a></li>
    		<li><a href="#Connect_string_properties">Connect string properties</a></li>
    	</ol>
    <li><a href="#Cache_management">Cache_management</a><ol>
			<li><a href="#Schema_cache">Schema_cache</a></li>
    	</ol>
    	</ol>
    <li><a href="#Memory_management">Memory_management</a><ol>
			<li><a href="#Out_of_memory">Out_of_memory</a></li>
    	</ol>
    </li>
</ol>
<!--
########################
##  1. Properties  #####
######################## -->
<h3>1. Properties<a name="Properties">&nbsp;</a></h3>

<p>Mondrian has a properties file to allow you to configure how it executes. The
mondrian.properties file is loaded when the executing Mondrian JAR detects it
needs properties, but can also be done explicitly in your code. It looks in
several places, in the following order:</p>
<ol>
  <li>In the directory where you started your JVM (Current working directory for
  JVM process, java.exe on Win32, java on *nix).</li>
  <li>If there isn't mondrian.properties under current working directory of JVM
  process, Class MondrianProperties's classloader will try to locate
  mondrian.properties in all of its classpaths. So you may put mondrian.properties
  under <code>/WEB-INF/classes</code> when you pack Mondrian into a Java web application.
  The demonstration web applications have this configuration.</li>
</ol>

<p>These properties are stored as system properties, so they can be set during
JVM startup via <code>-D&lt;property&gt;=&lt;value&gt;</code>.</p>
<!--
###########################
##  1.1 Property list #####
########################### -->
<h3>1.1 Property list<a name="Property_list">&nbsp;</a></h3>

<p>The following properties in <code>mondrian.properties</code> effect the
operations of Mondrian.</p>

<p>Not all of the properties in this table are of interest to the end-user. For
example, those in the 'Testing' are only applicable if are running Mondrian's
suite of regression tests.</p>

<table   class="grayTable" width="500">
    <tr>
      <td><strong>Property</strong></td>
      <td><strong>Type</strong></td>
      <td><strong>Default value</strong></td>
      <td><strong>Description</strong></td>
    </tr>
    <tr>
      <td colspan="4">
      <b><br>
      Miscellaneous</b>
      </td>
  </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#FoodmartJdbcURL">
      mondrian.foodmart .jdbcURL</a></code></td>
      <td>string</td>
      <td>&quot;jdbc:odbc:Mondrian FoodMart&quot;</td>
      <td>Property containing the JDBC URL of the FoodMart database. The default
      value is to connect to an ODBC data source called &quot;MondrianFoodMart&quot;.</td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#QueryLimit">
      mondrian.query. limit</a></code></td>
      <td>int</td>
      <td>40</td>
      <td>Maximum number of simultaneous queries the system will allow.<p>Oracle
      fails if you try to run more than the 'processes' parameter in init.ora,
      typically 150. The throughput of Oracle and other databases will probably
      reduce long before you get to their limit.</td>
    </tr>
    <tr>

      <td><code><a href="api/mondrian/olap/MondrianProperties.html#JdbcDrivers">
      mondrian. jdbcDrivers</a></code></td>
      <td>string</td>
      <td>mondrian.jdbcDrivers,<br>
      sun.jdbc.odbc .JdbcOdbcDriver,<br>
      org.hsqldb.jdbcDriver,<br>

      oracle.jdbc.Oracle Driver,<br>
      com.mysql.jdbc .Driver</td>
      <td>A list of JDBC drivers to load automatically. Must be a
      comma-separated list of class names, and the classes must be on the class
      path.</td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#ResultLimit">
      mondrian.result .limit</a></code></td>

      <td>int</td>
      <td>0</td>
      <td>If set to a value greater than zero, limits the maximum size of a
      result set.</td>
    </tr>
    <tr>
      <td>
      <code><a href="api/mondrian/olap/MondrianProperties.html#CachePoolCostLimit">
      mondrian.rolap. CachePool.costLimit</a></code></td>
      <td>int</td>
      <td>10,000</td>
      <td>Obsolete.</td>
    </tr>
    <tr>
      <td>
      <code><a href="api/mondrian/olap/MondrianProperties.html#MaxEvalDepth">mondrian.rolap.
      evaluate. MaxEvalDepth</a></code></td>
      <td>int</td>
      <td>10</td>
      <td>Maximum number of passes allowable while evaluating an MDX expression.
      If evaluation exceeds this depth (for example, while evaluating a very
      complex calculated member), Mondrian will throw an error.</td>
    </tr>
    <tr>
      <td>
      <code><a href="api/mondrian/olap/MondrianProperties.html#LargeDimensionThreshold">
      mondrian.rolap. LargeDimension Threshold</a></code></td>
      <td>int</td>
      <td>100</td>
      <td>Determines when a dimension is considered &quot;large&quot;. If a dimension has
      more than this number of members, Mondrian uses a
      <a href="api/mondrian/rolap/SmartMemberReader.html">smart member reader</a>.</td>

    </tr>
    <tr>
      <td>
      <code><a href="api/mondrian/olap/MondrianProperties.html#SparseSegmentCountThreshold">
      mondrian.rolap. SparseSegment ValueThreshold</a></code></td>
      <td>int</td>
      <td>1,000</td>

      <td>The values of the
      <code>mondrian.rolap. SparseSegment ValueThreshold</code> (<i>countThreshold</i>) and
      <code>mondrian.rolap. SparseSegment DensityThreshold</code> (<i>densityThreshold</i>)
      properties determine whether to choose a sparse or dense representation
      when storing collections of cell values in memory.

      <p>When storing
      collections of cell values in memory, Mondrian has to choose between a
      sparse and a dense representation, based upon the <i>possible</i> and <i>

      actual</i> number of values. The <dfn><font face="Verdana">density</font></dfn>
      is defined by the formula</p>


        <p><code><i>density</i> = <i>actual / possible</i></code></p>


      <p>Mondrian uses a sparse representation if</p>


        <p><code>possible - (countThreshold * actual) &gt; densityThreshold</code></p>

      <p>For example, at the default values (<i>countThreshold</i> = 1000 and <i>
      densityThreshold</i> = 0.5), Mondrian use a dense representation for </p>
      <ul>
        <li>(1000 possible, 0 actual), or </li>

        <li>(2000 possible, 500 actual), or</li>
        <li>(3000 possible, 1000 actual).</li>
      </ul>

      <p>Any fewer actual values, or any more possible values, and Mondrian will
      use a sparse representation.</p></td>
    </tr>
    <tr>
      <td>
      <code><a href="api/mondrian/olap/MondrianProperties.html#SparseSegmentDensityThreshold">
      mondrian.rolap. SparseSegment DensityThreshold</a></code></td>
      <td>double</td>
      <td>0.5</td>
      <td>See <code>mondrian.rolap. SparseSegment ValueThreshold</code>.</td>
    </tr>

    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#EnableTriggers">
      mondrian.olap. triggers.enable</a></code></td>
      <td>boolean</td>
      <td>true</td>
      <td>Whether to notify the Mondrian system when a property value changes.<p>

      This allows objects dependent on Mondrian properties to react (that is,
      reload), when a given property changes via, say,</p>


        <p>&nbsp;<code>MondrianProperties .instance() .populate(null)</code>;</p>

        <p>or</p>


        <p><code>MondrianProperties .instance() .QueryLimit.set(50);</code></p>
            </td>
    </tr>
    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#CaseSensitive">
      mondrian.olap. case.sensitive</a></code></td>
      <td>boolean</td>
      <td>false</td>
      <td>Controls whether the MDX parser resolves uses case-sensitive matching
      when looking up identifiers.</td>
    </tr>
    <tr>

      <td style="vertical-align: top;"><code>
      <a href="api/mondrian/olap/MondrianProperties.html#LocalePropFile">
      mondrian.rolap. localePropFile</a></code></td>
      <td style="vertical-align: top;">string</td>
      <td style="vertical-align: top;">null<br>
      </td>
      <td>Name of locale property file.<p>Used for the
      <a href="api/mondrian/rolap/DynamicSchemaProcessor.html">LocalizingDynamicSchemaProcessor</a>; see
      <a href="../schema/index.html#I18n">Internationalization</a> for more details.</td>

    </tr>
    <tr>
      <td><a href="api/mondrian/olap/MondrianProperties.html#QueryTimeout">
      <code>mondrian.rolap.queryTimeout</code></a></td>
      <td>int</td>
      <td>0</td>
      <td>If set to a value greater than zero, limits the number of seconds
      a query executes before it is aborted.</td>
    </tr>
    <tr>
      <td><code>
		<a href="api/mondrian/olap/MondrianProperties.html#api/mondrian/olap/MondrianProperties.html">
		mondrian.rolap.nonempty</a></code></td>
      <td>boolean</td>
      <td>false</td>
      <td>If true, each query axis implicit has the NON EMPTY option set (and in
		fact there is no way to display empty cells).</td>
    </tr>
    <tr>
      <td><a href="api/mondrian/olap/MondrianProperties.html#IgnoreInvalidMembers">
      <code>mondrian.rolap.ignoreInvalidMembers</code></a></td>
      <td>boolean</td>
      <td>false</td>
      <td>If set to true, during schema load, invalid members are ignored
        and will be treated as a null member if they are later referenced in
        a query.</td>
    </tr>
    <tr> 
      <td><a href="api/mondrian/olap/MondrianProperties.html#IterationLimit">
      <code>mondrian.rolap.IterationLimit</code></a></td>
      <td>int</td>
      <td>0</td>
      <td>If > 0, the maximum number of iterations allowed when evaluating an
        aggregate.  If 0, there is no limit.</td>
    </tr>
    <tr>
      <td colspan="4">

      <b><br>
      Tracing</b>
      </td>
  </tr>
    <tr>

      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TraceLevel">
      mondrian.trace. level</a></code></td>
      <td>int</td>
      <td>-</td>
      <td>The amount of tracing displayed.<p>If trace level is above 0, SQL
      tracing will be enabled and logged as per the out.file below. This is
      separate from Log4j logging.</td>
    </tr>

    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#DebugOutFile">
      mondrian.debug. out.file</a></code></td>
      <td>string</td>
      <td>System.out</td>
      <td>The name of the file to which tracing is to be written.</td>
    </tr>

    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#PrintCacheablesAfterQuery">
      mondrian.rolap. RolapResult. printCacheables</a></code></td>
      <td>boolean</td>
      <td>false</td>
      <td>Obsolete.</td>

    </tr>
    <tr>
      <td colspan="4">

      <b><br>
      Testing</b>
      </td>
  </tr>
    <tr>

      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TestName">
      mondrian.test. Name</a></code></td>
      <td>string</td>
      <td>null</td>
      <td>Property which determines which tests are run. This is a
      <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Pattern.html">
      Java regular expression</a>. If this property is specified, only tests
      whose names match the pattern in its entirety will be run.</td>

    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TestClass">
      mondrian.test. Class</a></code></td>
      <td>string</td>
      <td>-</td>
      <td>Property which determines which test class to run. This is the name of
      the class which either implements interface&nbsp; <code>

      <a href="http://junit.sourceforge.net/javadoc/junit/framework/Test.html">
      junit .framework.Test</a></code> or has a method <code>public static
      junit.framework.Test suite()</code>.</td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TestConnectString">
      mondrian.test .connectString</a></code></td>

      <td>string</td>
      <td>-</td>
      <td>Property containing the connect string which regresssion tests should
      use to connect to the database.<p>See the <a href="#Connect_strings">
      connect string specification</a> for more details.</td>
    </tr>

    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#QueryFilePattern">
      mondrian.test .QueryFilePattern</a></code></td>
      <td>string</td>
      <td>-</td>
      <td>(not documented)</td>
    </tr>

    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#QueryFileDirectory">
      mondrian.test .QueryFileDirectory</a></code></td>
      <td>string</td>
      <td>-</td>
      <td>(not documented)</td>

    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#Iterations">
      mondrian.test .Iterations</a></code></td>
      <td>int</td>
      <td>1</td>
      <td>(not documented)</td>

    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#VUsers">
      mondrian.test .VUsers</a></code></td>
      <td>int</td>
      <td>1</td>
      <td>(not documented)</td>

    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TimeLimit">
      mondrian.test .TimeLimit</a></code></td>
      <td>int</td>
      <td>0</td>
      <td>The time limit for the test run in seconds. If the test is running
      after that time, it is terminated.</td>

    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#Warmup">
      mondrian.test .Warmup</a></code></td>
      <td>boolean</td>
      <td>false</td>
      <td>Whether this is a &quot;warmup test&quot;.</td>

    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#CatalogURL">
      mondrian. catalogURL</a></code></td>
      <td>string</td>
      <td>-</td>
      <td>The URL of the catalog to be used by
      <a href="api/mondrian/tui/CmdRunner.html">CmdRunner</a> and XML/A Test.</td>

    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TestExpDependencies">
      mondrian.test .ExpDependencies</a></code></td>
      <td>int</td>
      <td>0</td>
      <td>Whether to test operators' dependencies, and how much time to spend
      doing it.<br>

      <br>
      If this property is positive, Mondrian's test framework allocates an
      expression evaluator which evaluates each expression several times, and
      makes sure that the results of the expression are independent of
      dimensions which the expression claims to be independent of.</td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TestSeed">
      mondrian.test .random.seed</a></code></td>
      <td>int</td>

      <td>1234</td>
      <td>Seed for random number generator used by some of the tests.<p>Any
      value besides 0 or -1 gives deterministic behavior. The default value is
      1234: most users should use this. Setting the seed to a different value
      can increase coverage, and therefore may uncover new bugs.</p>

      <p>If you set the value to 0, the system will generate its own
      pseudo-random seed.</p>

      <p>If you set the value to -1, Mondrian uses the next seed from an
      internal random-number generator. This is a little more deterministic than
      setting the value to 0.</p>

      <p>public final IntegerProperty TestSeed = new IntegerProperty(<br>

      this, &quot;&quot;, 1234);</p></td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TestJdbcURL">
      mondrian.test. jdbcURL</a></code></td>
      <td>string</td>
      <td>-</td>

      <td>Property containing the JDBC URL of a test database. It does not
      default.</td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TestJdbcUser">
      mondrian.test .jdbcUser</a></code></td>
      <td>string</td>
      <td>-</td>

      <td>Property containing the JDBC user of a test database. The default
      value is null, to cope with DBMSs that don't need this.</td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#TestJdbcPassword">
      mondrian.test .jdbcPassword</a></code></td>
      <td>string</td>
      <td>-</td>

      <td>Property containing the JDBC password of a test database. The default
      value is null, to cope with DBMSs that don't need this.</td>
    </tr>
    <tr>
      <td colspan="4">

      <b><br>
      Aggregate tables</b>
      </td>

  </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#UseAggregates">
      mondrian.rolap .aggregates.Use</a></code></td>
      <td>boolean</td>
      <td>false</td>
      <td>Whether to use aggregate tables.<p>If
      true, then Mondrian uses aggregate tables. This property is queried prior to each
      aggregate query so that changing the value of this property dynamically
      (not just at startup) is meaningful.</p>

      <p>Aggregates can be read from the
      database using the <code>mondrian.rolap. aggregates.Read</code> property
      but will not be used unless this property is set to true.</p></td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#ReadAggregates">
      mondrian.rolap .aggregates.Read</a></code></td>
      <td>boolean</td>

      <td>false</td>
      <td>Whether to read aggregate tables.<p>
      If set to true, then Mondrian scans the database for aggregate tables. Unless <code>
      mondrian.rolap. aggregates.Use</code> is set to true, the aggregates found will
      not be used.</p></td>
    </tr>
    <tr>

      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#ChooseAggregateByVolume">
      mondrian.rolap. aggregates. ChooseByVolume</a></code></td>
      <td>boolean</td>
      <td>false</td>
      <td>Whether to choose an aggregate tables based volume or row
      count.<p>If true, Mondrian uses the aggregate table with the smallest
      volume (number of rows multiplied by number of columns); if false,
      Mondrian uses the aggregate table with the fewest rows.</td>

    </tr>
    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#AggregateRules">
      mondrian.rolap. aggregates.rules</a></code></td>
      <td>string</td>
      <td>&quot;/DefaultRules.xml&quot;<br>

      (which is in the <code>mondrian.rolap .aggmatcher</code>
      package in <code>mondrian.jar</code>)</td>
      <td>Name of the file which defines the rules for recognizing an aggregate
      table.<p>Can be either a resource in the Mondrian jar or a URL. See
      <a href="aggregate_tables.html#How_Mondrian_recognizes_Aggregate_Tables">
      aggregate table rules</a> for details.</p>

      <p>Normally, this property is not set by a user.</td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#AggregateRuleTag">
      mondrian.rolap. aggregates.rule.tag</a></code></td>
      <td>string</td>
      <td>default</td>

      <td>The AggRule element's tag value.<br>
      <br>
      Normally, this property is not set by a user.</td>
    </tr>
    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#GenerateAggregateSql">mondrian.rolap. aggregates. generateSql</a></code></td>

      <td>boolean</td>
      <td>false</td>
      <td>Whether to print the SQL code
      generated for aggregate tables.<br>
      <br>
      If set, then as each aggregate request is processed, both the lost and
      collapsed dimension create and insert sql code is printed. This is for use
      in the CmdRunner allowing one to create aggregate table generation sql.</td>
    </tr>
    <tr>

      <td colspan="4">

      <b><br>
      Caching</b>
      </td>
    </tr>
    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#DisableCaching">mondrian.rolap. star.disable Caching</a></code></td>

      <td>boolean</td>
      <td>false</td>
      <td>Whether to clear a RolapStar's data
      cache after each query.<p>If true, RolapStar does not cache
      aggregate data from one query to the next: the cache is cleared after each
      query.</td>
    </tr>
    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#EnableExpCache">mondrian.expCache .enable</a></code></td>

      <td>boolean</td>
      <td>true</td>
      <td>Controls whether to use a cache for the results of frequently
      evaluated expressions.

      <p>With the cache disabled, an expression like:<br>
      <br>
      <code>Rank([Product]. CurrentMember,<br>
      &nbsp;&nbsp;&nbsp;&nbsp;

      Order([Product] .MEMBERS, [Measures].[Unit Sales]))<br>
      </code><br>
      would perform many redundant sorts.</p></td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#FlushAfterQuery">
      mondrian.rolap. RolapResult. flushAfter EachQuery</a></code></td>

      <td>boolean</td>
      <td>false</td>
      <td>Obsolete.</td>
    </tr>
    <tr>
      <td style="vertical-align: top;" colspan="4">

      <b><br>

      SQL generation</b>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>
      <a href="api/mondrian/olap/MondrianProperties.html#EnableNativeCrossJoin">mondrian.native .crossjoin.enable</a></code></td>
      <td style="vertical-align: top;">boolean</td>

      <td style="vertical-align: top;">true<br>
      </td>
      <td>If enabled, some NON EMPTY <code>CrossJoin</code>
      MDX statements will be computed in the database and not within Mondrian/Java </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>

      <a href="api/mondrian/olap/MondrianProperties.html#EnableNativeTopCount">mondrian.native .topcount.enable</a></code></td>
      <td style="vertical-align: top;">boolean</td>
      <td style="vertical-align: top;">false<br>
      </td>
      <td>If enabled, some <code>TopCount</code>
      MDX statements will be computed in the database and not within Mondrian/Java </td>

    </tr>
    <tr>
      <td style="vertical-align: top;"><code>
      <a href="api/mondrian/olap/MondrianProperties.html#EnableNativeFilter">mondrian.native .filter.enable</a></code></td>
      <td style="vertical-align: top;">boolean</td>
      <td style="vertical-align: top;">false<br>
      </td>

      <td>If enabled, some <code>Filter()</code>
      MDX statements will be computed in the database and not within Mondrian/Java </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>
      <a href="api/mondrian/olap/MondrianProperties.html#EnableNativeNonEmpty">
      mondrian.native .nonempty.enable</a></code></td>

      <td style="vertical-align: top;">boolean</td>
      <td style="vertical-align: top;">true<br>
      </td>
      <td>If enabled, some NON EMPTY MDX set operations like <code>
      member.children</code>, <code>level.members</code>
      and <code>member.descendants</code> will be computed in the database and
      not within Mondrian/Java </td>

    </tr>
    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#GenerateFormattedSql">
      mondrian.rolap. generate.formatted .sql</a></code></td>
      <td>boolean</td>
      <td>false</td>

      <td>Whether to pretty-print SQL generated statements.<p>If true, Mondrian
      generates SQL strings are generated in the log or output in pretty-print
      mode, formatted for ease of reading.</td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>
      <a href="api/mondrian/olap/MondrianProperties.html#MaxConstraints">
      mondrian.rolap. maxConstraints</a></code></td>
      <td style="vertical-align: top;">int</td>

      <td style="vertical-align: top;">1,000</td>
      <td style="vertical-align: top;">Max number of constraints in a single
      `IN' SQL clause.<p>This value may be variant among database products and
      their runtime settings. Oracle, for example, gives the error &quot;ORA-01795:
      maximum number of expressions in a list is 1000&quot;.</p>

      <p>Recommended values:</p>
      <ul>
        <li>Oracle: 1,000</li>

        <li>DB2: 2,500</li>
        <li>Other: 10,000</li>
      </ul>
      </td>
  </tr>
    <tr>
      <td style="vertical-align: top;" colspan="4">

      <b><br>
      XML/A</b>
      </td>
  </tr>
    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#EnableTotalCount">
      mondrian.xmla. drillthrough TotalCount.enable</a></code></td>

      <td>boolean</td>
      <td>true</td>
      <td>If enabled, first row in the result of an XML/A drill-through request
      will be filled with the total count of rows in underlying database.</td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#MaxRows">
      mondrian.xmla. drillthrough MaxRows</a></code></td>

      <td>int</td>
      <td>1,000</td>
      <td>Limit on the number of rows returned by XML/A drill through request.</td>
    </tr>
    <tr>
      <td style="vertical-align: top;" colspan="4">

      <b><br>
      Memory monitoring</b>
      </td>
  </tr>
    <tr>
      <td><code>
      <a href="api/mondrian/olap/MondrianProperties.html#MemoryMonitor">
      mondrian.util.memoryMonitor.enable
      </a></code></td>

      <td>boolean</td>
      <td>true</td>
      <td>If enabled and one is using Java5 or above, then Mondrian
      will use the Java5 memory monitoring capability - a
      MemoryLimitExceededException exception ought be throw rather than
      a OutOfMemoryError when memory get low and the JVM will not
      crash.
      </td>
    </tr>
    <tr>
      <td><code><a href="api/mondrian/olap/MondrianProperties.html#MemoryMonitorThreshold">
      mondrian.util.memoryMonitor.percentage.threshold
      </a></code></td>

      <td>int</td>
      <td>90</td>
      <td>At what level of memory usage should Mondrian be notified that
      memory is running low.</td>
    </tr>

</table>

<h2>Connect strings<a name="Connect_strings">&nbsp;</a></h2>

<h3>Connect string syntax<a name="Connect_string_syntax">&nbsp;</a></h3>

<p>Mondrian connect strings are a connection of property/value pairs, of the 
form 'property=value;property=value;...'.</p>
<p>Values can be enclosed in single-quotes, which allows them to contain spaces 
and punctuation. See the the
<a target="_blank" href="http://msdn.microsoft.com/library/en-us/oledb/htm/oledbconnectionstringsyntax.asp">
OLE DB connect string syntax specification</a>.</p>
<p>The supported properties are described below.</p>
<h3>Connect string properties<a name="Connect_string_properties">&nbsp;</a></h3>

<table border="1" id="table1">
    <tr>
        <th>Namee</th>
        <th>Required?</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>Provider</td>
        <td>Yes</td>
        <td><p>Must have the value &quot;Mondrian&quot;.</p></td>
    </tr>
    <tr>
        <td>Jdbc</td>
        <td rowspan="2">Exactly one</td>
        <td><p>The URL of the JDBC database where the data is stored. You must 
        specify either <code>DataSource</code> or <code>Jdbc</code>.</p></td>
    </tr>
    <tr>
        <td>DataSource</td>
        <td><p>The name of a data source class. The class must implement the 
        <a href="http://java.sun.com/j2se/1.5.0/docs/api/javax/sql/DataSource.html">javax.sql.DataSource</a> interface. 
        You must specify either 
        <code>DataSource</code> or <code>Jdbc</code>.</p></td>
    </tr>
    <tr>
        <td>JdbcDrivers</td>
        <td>Yes</td>
        <td><p>Comma-separated list of JDBC driver classes, for example,</p>
        
        <blockquote>
            <code>JdbcDrivers=sun.jdbc.odbc.JdbcOdbcDriver,oracle.jdbc.OracleDriver</code>
        </blockquote>
        </td>
    </tr>
    <tr>
        <td>JdbcUser</td>
        <td>No</td>
        <td><p>The name of the user to log on to the JDBC database. (If your JDBC 
        driver allows you to specify the user name in the JDBC URL, you don't 
        need to set this property.)</p></td>
    </tr>
    <tr>
        <td>JdbcPassword</td>
        <td>No</td>
        <td><p>The name of the password to log on to the JDBC database. (If your 
        JDBC driver allows you to specify the password in the JDBC URL, you 
        don't need to set this property.)</p></td>
    </tr>
    <tr>
        <td>Catalog</td>
        <td rowspan="2">Exactly one</td>
        <td><p>The URL of the catalog, an XML file which describes the schema: cubes, hierarchies, and so forth. 
        For example,</p>
        
        <blockquote><code>
            Catalog=file:demo/FoodMart.xml</code></blockquote>
        
        <p>Catalogs are described in <a href="schema.html">the Schema Guide</a>. 
        See also <code>CatalogContent</code>.</p></td>
    </tr>
    <tr>
        <td>CatalogContent</td>
        <td><p>An XML string representing the schema: cubes, hierarchies, and so forth. 
        For example,</p>
        
        <blockquote><code>
            CatalogContent=&lt;Schema name=&quot;MySchema&quot;&gt;&lt;Cube name=&quot;Cube1&quot;&gt; ... 
            &lt;/Schema&gt;</code></blockquote>
        
        <p>Catalogs are described in <a href="schema.html">the Schema Guide</a>. 
        See also <code>Catalog</code>.</p></td>
    </tr>
    <tr>
        <td>CatalogName</td>
        <td>No</td>
        <td><p>Not used. If, in future, Mondrian supports multiple catalogs, this property
        will specify which catalog to use. See also <code>Catalog</code>.</p></td>
    </tr>
    <tr>
        <td>PoolNeeded</td>
        <td>No</td>
        <td><p>Tells Mondrian whether to add a layer of connection pooling.</p>
        
        <p>If the value &quot;true&quot; is specified, or no value is specified, Mondrian 
        assumes that:</p>

        <ul>
            <li>connections created via the <code>Jdbc</code> property are not pooled, 
            and therefore need to be pooled;</li>
            <li>connections created via the <code>DataSource</code> are already pooled.</li>
        </ul>

        <p>If the value &quot;false&quot; is specified, Mondrian does not apply 
        connection-pooling to any connection.</p></td>
    </tr>
    <tr>
        <td>Role</td>
        <td>No</td>
        <td><p>The name of the <a href="schema.html#Access_control">role</a> to adopt 
        for access-control purposes. If not specified, the connection uses a role 
        which has access to every object in the schema.</p></td>
    </tr>
    <tr>
        <td>jdbc.*</td>
        <td>No</td>
        <td><p>Any property whose name begins with &quot;jdbc.&quot; will be added to the JDBC 
        connection properties, after removing this prefix. This allows you to specify connection 
        properties without a URL.</p>
        
        <p>For example, given the properties</p>

        <blockquote>
            <p><code>jdbc.Timeout=50; jdbc.CacheSize=1m</code></p>

        </blockquote>
        <p>Mondrian will create a JDBC connection using the properties 
        {Timeout=&quot;50&quot;, CacheSize=&quot;1m&quot;}.</td>
    </tr>
    <tr>
        <td>UseContentChecksum</td>
        <td>No</td>
        <td><p>Allows to work with dynamically changing schema. If this property
            is set to <code>true</code> and schema content has changed (previous
            checksum doesn't equal with current), schema would be reloaded.
            Default is <code>false</code>.</p>
            
            <p>Could be
            used in combination with <code>DynamicSchemaProcessor</code> property.</p></td>
    </tr>
    <tr>
        <td>DynamicSchemaProcessor</td>
        <td>No</td>
        <td><p>The name of a class which is called at runtime in order to modify 
        the schema content. The class must implement the
        <a href="api/mondrian/rolap/DynamicSchemaProcessor.html">
        mondrian.rolap.DynamicSchemaProcessor</a> interface. For example,</p>
        
        <blockquote>
            <code>DynamicSchemaProcessor = 
            mondrian.i18n.LocalizingDynamicSchemaProcessor</code>
        </blockquote>
        
        <p>uses the builtin schema processor class
        <a href="api/mondrian/i18n/LocalizingDynamicSchemaProcessor.html">
        mondrian.i18n.LocalizingDynamicSchemaProcessor</a> to replace variables 
        in the schema file, according to resource files and the current locale 
        (see the <code>Locale</code> property).</p></td>
    </tr>
    <tr>
        <td>Locale</td>
        <td>No</td>
        <td><p>The requested Locale for the current session. The locale determines 
        the formatting of numbers and date/time values, and Mondrian's error 
        messages.</p>
        
        <p>Example values are &quot;en&quot; (English), &quot;en_US&quot; 
        (United States English), &quot;hu&quot; (Hungarian). If Locale is not specified, then the name of system's default will be used, as per 
        <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Locale.html#getDefault()">
        java.util.Locale#getDefault().</td>
    </tr>
</table>
<p>Connect string properties are also documented in the
<a href="api/mondrian/rolap/RolapConnectionProperties.html">
RolapConnectionProperties</a> class.</p>

<h2>Cache management<a name="Cache_management"></a></h2>

<h3>Schema cache<a name="Schema_cache"></a></h3>

<font SIZE="2">
<p>To flush all schema definitions, use 
the <a href="api/mondrian/olap/MondrianServer.html#flushSchemaCache()">mondrian.olap.MondrianServer.flushSchemaCache()</a> 
method:</p>

<blockquote>
    <p><code>import mondrian.olap.*;<br>
    <br>
    Connection connection;<br>
    MondrianServer.forConnection(connection).flushSchemaCache();</code></p>

</blockquote>
<p>The cache is only used when creating new connections; existing connections 
retain their schemas.</p>

</font>

<h2>Memory management<a name="Memory_management"></a></h2>

<h3>Out Of Memory<a name="Out_of_memory"></a></h3>

<p>Java <code>OutOfMemoryError</code>s have always been an issue with
applications. When the JVM throws an <code>Error</code> as 
oppose to an <code>Exception</code> it is telling the application
that its world has ended and it has no recourse but to die.
Prior to Java5 there was not much one could do other
than buy 64-bit machines with lots of RAM and hope for the best.
For a multi-user, Mondrian environment with potentially very large 
data-sets and clients that
can generate queries requesting arbitrarily large amounts of that
data, this can be an issue. This is especially the case when
Mondrian is being hosted on some corporate web-server; applications
that kill web-servers are not looked upon favorably by IT.
<p>
With Java5 (and Java6, etc.) there is alternative. An application 
cay take advantage of
a new feature in Java5 allowing the application to be notified when
memory starts running low. This allows the application to take
preemptive action prior to an <code>OutOfMemoryError</code> being
generated by the Java runtime. 
<p>
Mondrian takes advantage of this new feature. Rather than
passing an <code>OutOfMemoryError</code> to its client, it
will now stop processing the present query, free up data structures
associated with the present query and return a
<code>MemoryLimitExceededException</code> to the client.
The <code>MemoryLimitExceededException</code> is one of Mondrian's
<code>ResultLimitExceededException</code> which are used to communicate
with clients that a limit has been exceeded, in this case, memory
usage.
<p>
By default, for Mondrian running under Java5, this feature is
enabled and the "safety limit" is set at 90 percent, when 
memory usage gets to with 90 percent of the maximum possible, the
the processing of the current query is stopped and a
<code>MemoryLimitExceededException</code> is return to the client.
See the Memory monitoring properties above on this page 
for additional information.
<p>
Lastly, the gorilla in the closet. Java5 in its wisdom only allows
for one memory threshold notification level to be registered with the JVM.
What this means is if within the same JVM, some code registers
one level, say, at 80% (here I use percentages for ease of presentation
rather than number of
bytes which is what the Java5 API actually supports) 
and some other code later on registers a level of
90%, then it is the 90% that the JVM knows about - it knows nothing
of the previously registered 80%. What this means is that the code
expecting to be notified when the memory level crosses 80%, wont be
notified!!! For many applications that don't share their JVM with
other applications, this is not a problem. For Mondrian is it
potentially an issue. Mondrian can be running in a Webserver and
Webservers can have more than one independent applications.
Each such application can register a different memory threshold
notification level.
In general, application containing applications such as
Webservers or Appservers are a problem with the current
Java5 memory threshold notification approach.
At the current time, I do not know a way around this problem.


<hr noshade size="1"/>
<p>
    Author: Julian Hyde; last modified August 2006.<br/>
    Version: $Id$
    (<a href="http://p4web.eigenbase.org/open/mondrian/doc/configuration.html?ac=22">log</a>)<br/>
    Copyright (C) 2006-2006 Julian Hyde
</p>

<br />

<!-- doc2web end -->

</body>
</html>
