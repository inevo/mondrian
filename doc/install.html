<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<!--
  == $Id$
  == This software is subject to the terms of the Common Public License
  == Agreement, available at the following URL:
  == http://www.opensource.org/licenses/cpl.html.
  == Copyright (C) 2001-2002 Kana Software, Inc.
  == Copyright (C) 2002-2006 Julian Hyde and others
  == All Rights Reserved.
  == You must accept the terms of that agreement to use this software.
  -->
  <meta http-equiv="Content-Language" content="en-us">
  <meta name="GENERATOR" content="Microsoft FrontPage 6.0">
  <meta name="ProgId" content="FrontPage.Editor.Document">
  <meta http-equiv="Content-Type"
 content="text/html; charset=windows-1252">
  <title>How to install Mondrian</title>
  <link rel="stylesheet" href="stylesheet.css" type="text/css">
</head>
<body>
<h1>How to install Mondrian</h1>
<p>By Julian Hyde and others; last updated March, 2006.</p>
<hr color="#000000" noshade="noshade" size="1">
<ol>
  <li><a href="#2_Download_the_code">Introduction</a></li>
  <li><a href="#3_Set_up_test_data">Set up test data with a
non-embedded database<br>
    </a></li>
  <ol>
    <li><a href="#4_1_Microsoft_Access">Microsoft Access</a></li>
    <li><a href="#3_2_Non_Access_setup">Other database</a></li>
  </ol>
  <li><a href="#5_Deploy_and_run_the_web_app">Run the web application
with a non-embedded database<br>
    </a></li>
  <li><a href="#5_Deploy_and_run_the_embedded_web_app">Run the web
application with the embedded test database</a><br>
  </li>
  <li><a href="#6_How_to_configure_Mondrian_as_an_XMLA_provider">How to
configure Mondrian as an XML/A provider</a></li>
  <li><a href="#7_Miscellaneous">Miscellaneous</a></li>
  <ol>
    <li><a href="install.html#6_1_mondrian_properties">mondrian.properties
configuration<br>
      </a></li>
    <li><a href="#7_1_Cache_setup">Cache setup</a></li>
  </ol>
  <li><a href="#Appendix_A_Compatibility_issues">Compatibility issues</a></li>
  <ol>
    <li><a href="#Appendix_A_1_Weblogic_6_1_and_Xerces">Weblogic 6.1
and Xerces</a></li>
    <li><a href="#Appendix_A_2_Xalan_and_Tomcat">Xalan and Tomcat</a></li>
    <li><a href="#Appendix_A_3_Log4j_and_Tomcat">Log4j and Tomcat</a><br>
    </li>
  </ol>
</ol>
<h2><a name="2_Download_the_code">1. Introduction</a></h2>
<p>The core of Mondrian is a JAR that acts as "JDBC for OLAP":
providing connections and executing SQL against underlying relational
databases. This can be run within a surrounding application. Mondrian
comes to you as binaries packaged in a number of ways:</p>
<ol>
  <li>As a WAR which includes JPivot, an OLAP web application
framework, and example data that can be loaded into your database of
choice.</li>
  <li>As a WAR with JPivot and an <span style="font-weight: bold;">embedded</span>
Derby database, which requires no additional set up apart from
deployment to an application server.<br>
  </li>
</ol>
<p>Both distributions contain the Mondrian source. All necessary JARs
for Mondrian are contained in the WAR /WEB-INF/lib directory.</p>
<p>Here is how to install a binary release:</p>
<ol>
  <li>Install the Java SDK (1.4.2 or later).</li>
  <li>Download the latest binary
release <code>mondrian-<i>version</i>.zip</code> from <a
 href="http://sourceforge.net/projects/mondrian">SourceForge</a>, and
unzip it.</li>
  <li>For the non-embedded distribution, set up the FoodMart dataset,
as described in <a href="#3_Set_up_test_data"> section 2</a>.</li>
  <li>Set up and start the web application, as described in <a
 href="#5_Deploy_and_run_the_web_app">section 4 or 5</a>.</li>
</ol>
<p>If you are Mondrian developer, there are additional instructions for
accessing the Perforce source-control server and building the code in
<a href="developer.html">the Developer's Guide</a>.</p>
<h2><a name="3_Set_up_test_data">2. Set up test data in a
non-embedded database</a></h2>
<p>The 'FoodMart' test dataset is part of the non-embedded binary
distribution. It is shipped in two formats: a Microsoft Access database
(<code>demo/access/MondrianFoodMart.mdb</code>) and in
a SQL script of insert statements (<code>demo/FoodMartCreateData.sql</code>).</p>
<p>Under Windows, using the Access
database is easier to set up, because all you need to do define an ODBC
data source. If you want to test using a
non Access database, or if you are not using Windows, you will need to
create your own empty database and load it using the
MondrianFoodMartLoader utility.<br>
</p>
<h3><a name="3_1_Access_setup">2.1. Microsoft Access</a></h3>
<p>If you are using Windows, Microsoft Access is the easiest database
to use for the test dataset. You just need to set up an ODBC datasource
for
the test dataset.</p>
<p>The test dataset needs to be accessed by the unit tests if you are
testing with just this database, or loading into another database.</p>
<p>Under the 'Administrative Tools' menu, click on the 'Data Sources
(ODBC)' menu item to open the ODBC Data Source Administrator.
Next, create a System DSN called <code>MondrianFoodMart</code>
pointing to
<code><i>MONDRIAN_HOME</i>/demo/access/MondrianFoodMart.mdb</code>.
(This allows Mondrian to access this data source using the
JDBC connect string "<code>jdbc:odbc:MondrianFoodMart</code>".</p>
<h3><a name="3_2_Non_Access_setup">2.2. Other database</a></h3>
<p>If not using Access, use the MondrianFoodMartLoader utility to
create a database, and load data from a SQL script.</p>
<h4>Syntax</h4>
<blockquote>
  <p><code>MondrianFoodMartLoader<br>
&nbsp;&nbsp;&nbsp; [-verbose] [-tables] [-data] [-indexes]<br>
&nbsp;&nbsp;&nbsp; -jdbcDrivers=&lt;jdbcDrivers&gt;<br>
&nbsp;&nbsp;&nbsp; -outputJdbcURL=&lt;jdbcURL&gt;<br>
&nbsp;&nbsp;&nbsp; [ [ [-outputJdbcUser=user]
[-outputJdbcPassword=password] [-outputJdbcBatchSize=&lt;batch
size&gt;] ]<br>
&nbsp;&nbsp;&nbsp; | -outputDirectory=&lt;directory name&gt;<br>
&nbsp;&nbsp;&nbsp; ]<br>
&nbsp;&nbsp;&nbsp; [ [-inputJdbcURL=&lt;jdbcURL&gt;
[-inputJdbcUser=user] [-inputJdbcPassword=password] ]<br>
&nbsp;&nbsp;&nbsp; | [-inputFile=&lt;file name&gt;]<br>
&nbsp;&nbsp;&nbsp; ]</code></p>
</blockquote>

<h4>Options</h4>

<blockquote>
  <table style="border-color:#000000; text-align: left" border="1" cellpadding="2"
 cellspacing="0" class="clsStd">
    <tbody>
      <tr>
        <td style="vertical-align: top; text-align: center;">
        <span
 style="font-weight: bold;">Option</span><br></td>
        <td style="vertical-align: top; text-align: center;">
        <span
 style="font-weight: bold;">Description</span><br></td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-verbose</code></td>
        <td style="vertical-align: top;">Verbose mode.</td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-tables</code></td>
        <td style="vertical-align: top;">Create tables in output JDBC, or
generate CREATE TABLE statement file in output directory for all
FoodMart tables, as appropriate for the output database type. If not
given, the tables are assumed to exist, and will be deleted first.</td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-data</code></td>
        <td style="vertical-align: top;">Load data from input (JDBC,
insert statement file) to output (JDBC, insert statement file). Any
existing data is deleted first.</td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-indexes</code></td>
        <td style="vertical-align: top;">Create indexes in output JDBC,
or generate CREATE INDEX statement file in output directory for all
FoodMart tables, as appropriate for the output database type.</td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-jdbcDrivers=</code><i><code>&lt;driver
list&gt;</code></i></td>
        <td style="vertical-align: top;">Comma-separated list of JDBC
drivers needed to connect to the source and target databases. The JAR
files containing these drivers must also be in the classpath (the <code>-cp</code>
argument to the <code>java</code> command).</td>
      </tr>
      <tr>
        <td style="vertical-align: top;" nowrap="nowrap"><code>-outputJdbcURL<i>=&lt;jdbcURL&gt;</i></code></td>
        <td style="vertical-align: top;">

        <p>JDBC URL for target database</p></td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-outputJdbcUser=<i>&lt;user&gt;</i></code></td>
        <td style="vertical-align: top;">User name for target database</td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-outputJdbcPassword=<i>&lt;password&gt;</i></code></td>
        <td style="vertical-align: top;">Password for target database</td>
      </tr>
      <tr>
        <td style="vertical-align: top;" nowrap="nowrap"><code>-outputDirectory=<i>&lt;directory
name&gt;</i></code></td>
        <td style="vertical-align: top;">Optional. Directory where DB
creation
scripts will be placed. Statements are in a format that will work for
the database type indicated by outputJdbcURL.</td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-outputJdbcBatchSize=<i>&lt;batch
size&gt;</i></code></td>
        <td style="vertical-align: top;">Size of batch for JDBC INSERT
statement output. Defaults to 50. If set to 1, JDBC batches are not
used.</td>
      </tr>
      <tr>
        <td style="vertical-align: top;" nowrap="nowrap"><code>-inputJdbcURL=<i>&lt;jdbcURL&gt;</i></code></td>
        <td style="vertical-align: top;">JDBC URL for source database</td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-inputJdbcUser=<i>&lt;user&gt;</i></code></td>
        <td style="vertical-align: top;">User name for source database</td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-inputJdbcPassword=<i>&lt;password&gt;</i></code></td>
        <td style="vertical-align: top;">Password for source database</td>
      </tr>
      <tr>
        <td style="vertical-align: top;"><code>-inputFile=<i>&lt;file
name&gt;</i></code></td>
        <td style="vertical-align: top;">Optional. If no input DB
parameters are
given, assumes data comes from this file of INSERT statements.</td>
      </tr>
    </tbody>
  </table>
</blockquote>
<p>The usual source for the MondrianFoodMartLoader utility is
a SQL script (<code>[-inputFile=&lt;file name&gt;]</code>). But you
have already loaded the data into one JDBC data source (say Microsoft
Access), use the <code>
-inputJdbcURL</code> and related options to copy data to another JDBC
database.</p>
<p>The loader uses standard J2SE JDBC, the relevant JDBC driver JARs,
and some classes out of Mondrian that do not rely on additional JARs.
It has been tested against Oracle, Postgres, MySQL and Microsoft Access.</p>
<p>If you the target is a JDBC database, you must create the necessary
database or schema first. This is database-specific.</p>
<p>You can safely ignore any log4j warnings:</p>
<blockquote>
  <p><code>log4j:WARN No appenders could be found for logger
(mondrian.rolap.RolapUtil).&nbsp;<br>
log4j:WARN Please initialize the log4j system properly.</code></p>
</blockquote>
<h4>Examples</h4>

<p>Here are some examples to give you a general idea how
<code>MondrianFoodMartLoader</code> is invoked. The command line you use
will vary depending upon your operating system, and intended
source and target data sources.</p>

<h5>Example 1. Loading MySQL from a file on Linux</h5>

<p>The following example is a Linux command line to
create a MySQL schema called 'foodmart', and create
FoodMart tables from the test dataset in the SQL
scripts. First, create a <code>foodmart</code> database and a <code>foodmart</code> 
user:</p>

<blockquote>
  <p><code><i><b>$</b></i> mysqladmin create foodmart<b><i><br>
  $</i></b> mysql<b><br>
  <i>mysql&gt;</i> grant all privileges on *.* to 'foodmart'@'localhost' identified 
  by 'foodmart';<br>
  <i>Query OK, 0 rows affected (0.00 sec)<br>
  <br>
  mysql&gt; </i></b>quit<b><i><br>
  Bye</i></b></code></p>
</blockquote>

<p>Now load the data:</p>

<blockquote>
  
  <p><code><b><i>$</i></b> java -cp
"/mondrian/lib/mondrian.jar:/mondrian/lib/log4j-1.2.9.jar:/mondrian/lib/eigenbase-xom.jar:/mondrian/lib/eigenbase-resgen.jar:/mondrian/lib/eigenbase-properties.jar:/usr/local/mysql/mysql-connector-java-3.0.16-ga-bin.jar"<br>&nbsp;&nbsp;&nbsp;&nbsp; mondrian.test.loader.MondrianFoodMartLoader<br>&nbsp;&nbsp;&nbsp;&nbsp; -verbose -tables -data -indexes<br>&nbsp;&nbsp;&nbsp;&nbsp; -jdbcDrivers=com.mysql.jdbc.Driver<br>&nbsp;&nbsp;&nbsp;&nbsp;
-inputFile=/mondrian/demo/FoodMartCreateData.sql <br>&nbsp;&nbsp;&nbsp;&nbsp;
-outputJdbcURL="jdbc:mysql://localhost/foodmart?user=foodmart&amp;password=foodmart"</code><br>
  </p>
</blockquote>

<h5>Example 2. Loading PostgreSQL from Access on Windows</h5>

<p>The following example is a Windows command line to
create FoodMart tables for PostgreSQL from the test
dataset in the Access database:</p>

<blockquote>
  <p><code><i><b>C:\mondrian&gt;</b></i> java -cp
"C:\mondrian\lib\mondrian.jar;C:\mondrian\lib\log4j-1.2.9.jar;C:\mondrian\lib\eigenbase-xom.jar;C:\mondrian\lib\eigenbase-resgen.jar;C:\mondrian\lib\eigenbase-properties.jar;C:\mondrian\lib\postgres-jdbc.jar"<br>
&nbsp;&nbsp;&nbsp;&nbsp; mondrian.test.loader.MondrianFoodMartLoader<br>
&nbsp;&nbsp;&nbsp;&nbsp; -verbose -tables -data -indexes<br>
&nbsp;&nbsp;&nbsp;&nbsp;
-jdbcDrivers="org.postgresql.Driver,sun.jdbc.odbc.JdbcOdbcDriver"<br>
&nbsp;&nbsp;&nbsp;&nbsp; -inputJdbcURL="jdbc:odbc:MondrianFoodMart"<br>
&nbsp;&nbsp;&nbsp;&nbsp;
-outputJdbcURL="jdbc:postgresql://localhost/foodmart"<br>
&nbsp;&nbsp;&nbsp;&nbsp; -outputJdbcUser=postgres<br>
&nbsp;&nbsp;&nbsp;&nbsp; -outputJdbcPassword=password</code></p>
</blockquote>

<h2><a name="5_Deploy_and_run_the_web_app">3. Deploy and run the web
application with a non-embedded database<br>
</a></h2>
<ul>
  <li>Install Tomcat (version 5.0.25 or later).<br>
  </li>
</ul>
<ol>
</ol>
<ul>
  <li>From the unzipped binary release, explode <code>lib/mondrian.war</code>
to <code><i>TOMCAT_HOME</i>/webapps/mondrian<br>
    <br>
    </code></li>
  <li>Open the mondrian.properties file in <code>&lt;path to
tomcat&gt;\webapps\mondrian</code> and customize the&nbsp; <code>mondrian.jdbcDrivers</code>
properties for the database you set up from the instructions above.<br>
    <br>
  </li>
  <li>Open the web.xml file in <code>&lt;path to
tomcat&gt;\webapps\mondrian\WEB-INF</code> and customize the two
connect strings there to the same database parameters for the FoodMart
database you installed as per the above instructions, ie.</li>
  <ul>
  </ul>
</ul>
<p style="margin-left: 40px;"><code>Provider=mondrian;Jdbc=jdbc:odbc:MondrianFoodMart;Catalog=/WEB-INF/queries/FoodMart.xml;JdbcDrivers=sun.jdbc.odbc.JdbcOdbcDriver;</code></p>
<div style="margin-left: 40px;"><code><span
 style="font-family: verdana,helvetica,arial,sans-serif;">becomes:</span></code><br>
<code><span style="font-family: verdana,helvetica,arial,sans-serif;"></span></code><br>
<code><span style="font-family: verdana,helvetica,arial,sans-serif;"></span></code><code><span
 style="font-family: verdana,helvetica,arial,sans-serif;"> </span></code><code><span
 style="font-family: verdana,helvetica,arial,sans-serif;"></span><span
 style="font-family: verdana,helvetica,arial,sans-serif;">Provider=mondrian;Jdbc=jdbc:mysql://localhost/foodmart?user=foodmart&amp;#38;password=foodmart;</span></code><br>
<code><span style="font-family: verdana,helvetica,arial,sans-serif;"></span></code><code><span
 style="font-family: verdana,helvetica,arial,sans-serif;">Catalog=/WEB-INF/queries/FoodMart.xml;JdbcDrivers=com.mysql.jdbc.Driver;</span></code>
<br>
</div>
<ul>
  <li>Modify the <code>fourheir</code>, <code>mondrian</code>, <code>colors</code>
and <code>arrows </code>JSPs in <code>&lt;path to
tomcat&gt;\webapps\mondrian\WEB-INF\queries as follows:</code></li>
</ul>
<blockquote style="margin-left: 40px;"> </blockquote>
<div style="margin-left: 80px;">
<p>Modify the line: </p>
<p>&nbsp;&nbsp;&nbsp; <code>&lt;jp:mondrianQuery id="query01"
jdbcDriver="sun.jdbc.odbc.JdbcOdbcDriver"
jdbcUrl="jdbc:odbc:MondrianFoodMart"
catalogUri="/WEB-INF/queries/FoodMart.xml"&gt;</code> </p>
<p>to the same database parameters for the FoodMart database you
installed as per the above instructions. ie. for MySQL,
something like: </p>
<p>&nbsp;&nbsp;&nbsp; <code>&lt;jp:mondrianQuery id="query01"
jdbcDriver="com.mysql.jdbc.Driver"
jdbcUrl="jdbc:mysql://localhost/foodmart?user=foodmart&amp;#38;password=foodmart";
catalogUri="/WEB-INF/queries/FoodMart.xml"&gt;</code><br>
</p>
</div>
<ul>
  <li>Copy the following files:</li>
  <ul>
    <li>If needed, copy your JDBC driver JAR to <code>&lt;path
to tomcat&gt;\common\endorsed</code></li>
    <li>Copy <code>xalan.jar</code> to <code>&lt;path to
tomcat&gt;\common\endorsed</code></li>
  </ul>
</ul>
<ul>
  <li>Start your database, if needed.</li>
</ul>
<ol>
  <li>Hit <a href="http://localhost:8080/mondrian" target="_new">http://localhost:8080/mondrian</a>.</li>
</ol>
<h2><a name="5_Deploy_and_run_the_embedded_web_app">5. Deploy and run
the web
application with the embedded test database</a></h2>
<ul>
  <li>From the unzipped embedded database binary release, explode <code>lib/mondrian-embedded.war</code>
to <code><i>TOMCAT_HOME</i>/webapps/mondrian-embedded<br>
    <br>
    </code></li>
  <li>Start up Tomcat<br>
    <br>
  </li>
  <li>Hit <a href="http://localhost:8080/mondrian" target="_new">http://localhost:8080/mondrian-embedded</a></li>
</ul>
<h2><a name="6_How_to_configure_Mondrian_as_an_XMLA_provider">6. How to
configure Mondrian as an XML/A provider</a></h2>
<p>
To will setup XMLA service, follow the following steps.</p>
<h3>1. Describe the data which data sources exist</h3>
<p>In WEB-INF directory of your webapp, create a file called <code>
datasources.xml</code>, with content like this:</p>
<blockquote>
  <p><code>&lt;?xml version="1.0"?&gt;<br>
&lt;DataSources&gt;<br>
&nbsp; &lt;DataSource&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;DataSourceName&gt;MondrianFoodMart&lt;/DataSourceName&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;DataSourceDescription&gt;FoodMart 2000 Data
Warehouse From MS Analysis Services&lt;/DataSourceDescription&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;URL&gt;http://localhost:8080/mondrian/xmla&lt;/URL&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;DataSourceInfo&gt;Provider=mondrian;
Jdbc=jdbc:odbc:MondrianFoodMart;
JdbcDrivers=sun.jdbc.odbc.JdbcOdbcDriver;
Catalog=/WEB-INF/schema/FoodMart.xml&lt;/DataSourceInfo&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;ProviderName&gt;Mondrian Perforce
HEAD&lt;/ProviderName&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;ProviderType&gt;MDP&lt;/ProviderType&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;AuthenticationMode&gt;Unauthenticated&lt;/AuthenticationMode&gt;<br>
&nbsp; &lt;/DataSource&gt;<br>
  <br>
&nbsp; &lt;DataSource&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;DataSourceName&gt;PostgreSQLTest&lt;/DataSourceName&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;DataSourceDescription&gt;Test Data Warehouse On
PostgreSQL&lt;/DataSourceDescription&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;URL&gt;http://localhost:8080/mondrian/xmla&lt;/URL&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;DataSourceInfo&gt;Provider=mondrian;
Jdbc=jdbc:postgresql://localhost/olap;
Catalog=/WEB-INF/schema/TestPgsql.xml;
JdbcDrivers=org.postgresql.Driver; JdbcUser=pgsql;
JdbcPassword=pgsql&lt;/DataSourceInfo&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;ProviderName&gt;Mondrian Perforce
HEAD&lt;/ProviderName&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;ProviderType&gt;MDP&lt;/ProviderType&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;AuthenticationMode&gt;Unauthenticated&lt;/AuthenticationMode&gt;<br>
&nbsp; &lt;/DataSource&gt;<br>
&lt;/DataSources&gt;</code></p>
</blockquote>
<p>
<code>&lt;ProviderType&gt;</code> and <code>&lt;AuthenticationMode&gt;</code>
are ignored because the XML/A implementation currently only supports
'MDP' and 'Unauthenticated'.</p>
<h3>
2. Configure XmlaServlet in your <code>web.xml</code></h3>
<p>
For example:</p>
<blockquote>
  <p><code>&lt;servlet&gt;<br>
&nbsp; &lt;servlet-name&gt;MondrianXmlaServlet&lt;/servlet-name&gt;<br>
&nbsp;
&lt;servlet-class&gt;mondrian.xmla.XmlaServlet&lt;/servlet-class&gt;<br>
&nbsp; &lt;init-param&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;param-name&gt;DataSourcesConfig&lt;/param-name&gt;<br>
&nbsp;&nbsp;&nbsp;
&lt;param-value&gt;datasources.xml&lt;/param-value&gt;<br>
&nbsp; &lt;/init-param&gt;<br>
&lt;/servlet&gt;</code></p>
</blockquote>
<h2>
<a name="7_Miscellaneous">6. Miscellaneous</a></h2>
<h3><a name="6_1_mondrian_properties">6.1. mondrian.properties</a></h3>

<p>Properties are described in the <a href="configuration.html">Configuration 
Guide</a>.<br>
</p>
<h3><a name="7_1_Cache_setup">6.2. Cache setup</a></h3>
<p>You will need to specify the amount of memory available to the cache
using the -Xms Java VM option, for example -Xms256m for 256 megs of ram
for the Java VM.</p>
<h2><a name="Appendix_A_Compatibility_issues">7. Compatibility
issues</a></h2>
<h3><a name="Appendix_A_1_Weblogic_6_1_and_Xerces"><font color="#990000">7.1.
Weblogic 6.1 and Xerces</font></a></h3>
<p>Weblogic 6.1 ships with an older, incompatible, version of Xerces.
The
symptom is the error</p>
<blockquote>
  <pre>java.lang.VerifyError: (class: org/eigenbase/xom/wrappers/XercesDOMParser,<br> method: parse signature: (Lorg/xml/sax/InputSource;)Lorg/w3c/dom/Document;)<br> Incompatible object argument for function call<br>at java.lang.Class.forName0(Native Method)<br>at java.lang.Class.forName(Class.java:120)<br>at org.eigenbase.xom.XOMUtil.createDefaultParser(XOMUtil.java:165)<br>at org.eigenbase.resgen.Util.load(Util.java:49)<br>...</pre>
</blockquote>
<p>The solution is to place <code>xml-apis.jar</code> and <code>xercesImpl.jar</code>
before <code>weblogic.jar</code> on your class-path.</p>
<p>Generally, Mondrian uses whichever JAXP-compliant XML parser is
provided by
the system. Unfortunately Weblogic's parser cannot be set to
non-validating
mode, and Mondrian needs this. Therefore, in a Weblogic environment,
Mondrian
explicitly uses Xerces.&nbsp; Fyi,
<a href="http://xml.apache.org/soap/faq/faq-for-WL6.1beta.html">this
note</a>
describes how to change Weblogic's default XML parser.</p>
<h3><a name="Appendix_C_2_Xalan_and_Tomcat"><font color="#990000">7.2.
JDK, Xalan
and Tomcat</font></a></h3>
<p>Mondrian binaries, as shipped, require JDK 1.4.x, Xalan 2.6.0, and
Tomcat
5.0.25 or later. Things work better that way.</p>
<p>If you are running JDK 1.3.<i>x</i>, you will need some extra JAR
files, because JDK 1.3 does
not include the an XML parser. Copy <code> xalan.jar</code> and <code>xml-apis.jar</code>
to <code><i>TOMCAT_HOME</i>/common/lib</code>. (or <code><i>TOMCAT_HOME</i>/common/endorsed</code>,
if your version of Tomcat has one). If you get the configuration wrong,
a typical error is</p>
<blockquote>
  <p><code>java.lang.VerifyError: Cannot inherit from final class<br>
&nbsp; at java.lang.ClassLoader.defineClass0(Native Method)<br>
&nbsp; at java.lang.ClassLoader.defineClass(ClassLoader.java:502)<br>
&nbsp; at
java.security.SecureClassLoader.defineClass(SecureClassLoader.java:123)<br>
&nbsp; at
org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1664)<br>
&nbsp; at
org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:953)<br>
&nbsp; at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1394)<br>
&nbsp; at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1274)<br>
&nbsp; at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:315)<br>
&nbsp; at
org.apache.xerces.impl.XMLNSDocumentScannerImpl.createContentDispatcher(Unknown
Source)<br>
&nbsp; at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.&lt;init&gt;(XMLDocumentFragmentScannerImpl.java:249)<br>
&nbsp; at
org.apache.xerces.impl.XMLDocumentScannerImpl.&lt;init&gt;(XMLDocumentScannerImpl.java:245)<br>
&nbsp; at
org.apache.xerces.impl.XMLNSDocumentScannerImpl.&lt;init&gt;(Unknown
Source)<br>
&nbsp; at
org.apache.xerces.parsers.IntegratedParserConfiguration.createDocumentScanner(Unknown
Source)<br>
&nbsp; at
org.apache.xerces.parsers.DTDConfiguration.&lt;init&gt;(DTDConfiguration.java:367)<br>
&nbsp; at
org.apache.xerces.parsers.StandardParserConfiguration.&lt;init&gt;(StandardParserConfiguration.java:198)<br>
&nbsp; at
org.apache.xerces.parsers.IntegratedParserConfiguration.&lt;init&gt;(Unknown
Source)<br>
&nbsp; at
org.apache.xerces.parsers.IntegratedParserConfiguration.&lt;init&gt;(Unknown
Source)<br>
&nbsp; at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
Method)</code></p>
</blockquote>
<p>This error occurred under JDK 1.3.1, Tomcat 4.1.18, Xalan 2.4.1. The
solutions to the error were (a) move to JDK 1.4 and remove <code>xml-apis.jar</code>
and
<code>xercesImpl.jar</code> from <code>mondrian.war</code>, or (b)
revert to Xalan 2.3.1.<br>
</p>
<h3><a name="Appendix_A_3_Log4j_and_Tomcat"><font color="#990000">
7.3. Log4j and Tomcat</font></a></h3>
<p>The Mondrian WARs come packaged with a version of log4j.jar. This
may conflict with your app server, such as JBoss, and cause errors in
the
log about log4j appenders. The fix is to remove the log4j.jar from the
Mondrian WAR.</p>
<p>&nbsp;</p>
<hr>
<table class="clsStd" style="border-collapse: collapse;" border="0"
 bordercolor="#111111" cellpadding="0" cellspacing="0" width="100%">
  <tbody>
    <tr>
      <td class="content"> <a target="_top" href="index.html">Home</a>
| <a target="_top" href="#">No frames</a> | This file is<i> <a
 href="http://mondrian.sourceforge.net/install.html">$Id:
//open/mondrian/doc/install.html#51 $ </a></i> (<a
 href="http://perforce.eigenbase.org:8080/open/mondrian/doc/install.html?ac=22">log</a>)</td>
      <td align="right"> <a href="http://sourceforge.net"> <img
 src="http://sourceforge.net/sflogo.php?group_id=35302&amp;type=1"
 alt="SourceForge.net Logo" border="0" height="31" width="88"> </a> </td>
    </tr>
  </tbody>
</table>
</body>
</html>
