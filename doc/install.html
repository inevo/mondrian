<html>
<!--
  == $Id$
  == This software is subject to the terms of the Common Public License
  == Agreement, available at the following URL:
  == http://www.opensource.org/licenses/cpl.html.
  == (C) Copyright 2001-2003 Kana Software, Inc. and others.
  == All Rights Reserved.
  == You must accept the terms of that agreement to use this software.
  == jhyde, 24 September, 2002
  -->

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>How to download, build and install Mondrian</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css" />
</head>

<body>
<h1>How to download, build and install Mondrian</h1>

<h2><a name="1_Contents">1. Contents</a></h2>
<ol>
  <li><a href="#1_Contents">Contents</a>
  <li><a href="#2_Modification_history">Modification history</a>
  <li><a href="#3_Setup_build_environment">Setup build environment</a>
  <li><a href="#4_Download_the_source_code">Download the  code</a>
  <li><a href="#5_Load_the_database">Load the database</a>
  <ol>
    <li><a href="#5_1_Microsoft_Access">Microsoft Access</a></li>
    <li><a href="#5_2_Oracle">Oracle</a></li>
    <li><a href="#5_3_hsqldb">hsqldb</a></li>
    <li><a href="#5_4_MySQL">MySQL</a></li>
    <li><a href="#5_5_PostgreSQL">PostreSQL</a></li>
    <li><a href="#5_6_IBM_DB2">IBM DB2</a></li>
  </ol></li>
  <li><a href="#6_Run_the_test_suite">Run the test suite</a>
  <li><a href="#8_Run_the_web_app">Run the web app</a>
  <li><a href="#8_Miscellaneous">Miscellaneous</a>
    <ol>
      <li><a href="#8_1_Coding_guidelines">Coding guidelines</a></li>
    </ol>
  <li><a href="#Appendix_A_Product_installation_instructions">Appendix A: 
  Product instllation instructions</a></li>
  <li><a href="#Appendix_B_How_to_debug_Tomcat_using_IntelliJ">Appendix B: How 
  to debug Tomcat using IntelliJ</a></ol>

<h2><a name="2_Modification_history">2. Modification history</a></h2>
<table border="1" class="clsStd" style="border-collapse: collapse" bordercolor="#111111" cellpadding="2" cellspacing="0">
  <tr>
    <th>Date</th>
    <th>Revision</th>
    <th>Author</th>
    <th>Comment</th>
  </tr>
  <tr>
    <td nowrap><I>February 7<SUP>th</SUP>, 2002</I></td>
    <td><em>1</em></td>
    <td><i>Julian Hyde</i></td>
    <td><em>Created</em></td>
  </tr>
  <tr>
    <td><I>March 5<SUP>th</SUP>, 2002</I></td>
    <td><em>2</em></td>
    <td><i>Julian Hyde</i></td>
    <td><em>Tomcat install</em></td>
  </tr>
  <tr>
    <td><I>March 28<SUP>th</SUP>, 2002</I></td>
    <td><em>3</em></td>
    <td><i>Julian Hyde</i></td>
    <td><em>Xalan, JUnit and Oracle.<br>
    Moved product info to an appendix.</em></td>
  </tr>
  <tr>
    <td><I>July 26<SUP>th</SUP>, 2002</I></td>
    <td><em>4</em></td>
    <td><i>Julian Hyde</i></td>
    <td><em>Upgrade to Ant 1.5, Tomcat 4.0.4.</em></td>
  </tr>
  
  <tr>
    <td><I>August  1<SUP>st</SUP>, 2002</I></td>
    <td><em>5</em></td>
    <td><i>Julian Hyde</i></td>
    <td><em>Clean up database instructions. Add 'Download the source code' 
    section.</em></td>
  </tr>
  
   <tr>
    <td nowrap><I>August 21<SUP>st</SUP>, 2002</I></td>
    <td><em>6</em></td>
    <td nowrap><i>Paul Dymecki</i></td>
    <td><em>Add binary installation instructions in 4.1. Add run installation to section 5.
    </em></td>
  </tr>
  
   <tr>
    <td nowrap><i>August 23<sup>rd</sup>, 2002</i></td>
    <td><em>7</em></td>
    <td nowrap><i>Julian Hyde</i></td>
    <td><em>Add MySQL instructions.</em></td>
  </tr>
  
   <tr>
    <td nowrap><i>September 23<sup>rd</sup>, 2002</i></td>
    <td><em>8</em></td>
    <td nowrap><i>Julian Hyde</i></td>
    <td><em>Revised installation instructions for binary release.</em></td>
  </tr>
</table>

<h2><a name="3_Setup_build_environment">3. Setup build environment</a></h2>

<p>Here are the steps to setup a build environment.</p>

<ol>
  <li>Install <a href="#JDK">JDK</a>.</li>
  <li>Install <a href="#Ant">Ant</a>.</li>
  <li>Install <a href="#Tomcat">Tomcat</a>.</li>
  <li>Install <a href="#Xalan">Xalan</a>.</li>
  <li>Install <a href="#JUnit">JUnit</a>.</li>
  <li>Go to <i></i><code><i>${xalan.home}</i>/bin</code>, and copy <code>
  xalan.jar</code> and <code>xml-apis.jar</code> to <i></i><code><i>${tomcat.home}</i>/common/lib</code>.</li>
  <li>Modify <code>build.bat</code>, setting <code>JAVA_HOME</code>, <code>ANT_HOME</code>, 
  <code>TOMCAT_HOME</code>, <code>XALAN_HOME</code>, <code>JUNIT_HOME</code>.</li>
</ol>

<p>Optional:</p>
<ol>
  <li>Install <a href="#Jikes">Jikes</a>.</li>
  <li>Configure <a href="#Weblogic">Weblogic</a>.</li>
</ol>

<h2><a name="4_Download_the_source_code">4. Download the code</a></h2>

<p>Three ways to do this: you can get a binary distribution, get and build a 
source distribution, or get and build the latest code from the Perforce 
source-code server.</p>

<h3><a name="4_1_Download_the_latest_binary_release">4.1. Download the latest binary release</a></h3>

<p>Download the latest binary
release <code> mondrian-0.<i>x</i>-bin.zip</code> from <a href="http://sourceforge.net/projects/mondrian">
SourceForge</a>, and unzip it. The place you unzipped to &mdash; say <code>C:\mondrian</code> 
or <code>/usr/mondrian-0.<i>x</i></code> &mdash; is your <dfn>project 
location</dfn> (denoted by <code> <i>${project.location}</i></code>). Now 
do the following steps:</p>

<blockquote>
<ol>
<li>Load the database, as described <a href="#5_Load_the_database">here</a>.</li>
<li>Change variables in <code><i>${project.location}</i>/bin/mondrian.bat</code> 
and <code><i>${project.location}</i>/bin/mondrian.properties</code> to suit your environment.</li>
<li><code>cd <i>${project.location}</i>/bin</code></li>   
<li>Type <code>mondrian.bat test</code> to run the JUnit test suite. All of the 
tests should succeed.</li>   
<li>To run the webapp in Tomcat, type <code>mondrian.bat deploy-to-tomcat</code>. 
This will create <i><code>TOMCAT_HOME</i>/webapps/mondrian.war</code>.</li>   
<li>Start Tomcat and hit <a href="http://localhost:8080/mondrian">http://localhost:8080/mondrian</a>.</li>
 </ol>
</blockquote>

<h3><a name="4_2_Download_the_latest_source_release">4.2. Download the 
latest source release</a></h3>
<p>Download the latest <code>mondrian-0.<i>x</i>-src.zip</code> from <a href="http://sourceforge.net/projects/mondrian">
SourceForge</a>, and unzip. The place you unzipped to &mdash; <code>C:\mondrian</code> 
or <code>/usr/mondrian-0.<i>x</i></code> &mdash; your <dfn>project location</dfn> (denoted by <code><i>${project.location}</i></code>).</p>

<p>Now build the code, as follows:</p>

<blockquote>
<pre>C:\mondrian&gt; <b>build</b>
Buildfile: build.xml

sniff:

prepare:

parser:
[javacup] Opening files...
[javacup] Parsing specification from C:\mondrian\src\main\mondrian\olap\Parser.cup...
[javacup] Checking specification...
[javacup] Warning: Terminal &quot;UNKNOWN&quot; was declared but never used
[javacup] Warning: Non terminal &quot;unsigned_integer&quot; was declared but never used
[javacup] Building parse tables...
[javacup] Computing non-terminal nullability...
[javacup] Computing first sets...
[javacup] Building state machine...
[javacup] Filling in tables...
[javacup] Checking for non-reduced productions...
[javacup] Writing parser...
[javacup] Closing files...
[javacup] ------- CUP v0.10k Parser Generation Summary -------
[javacup] 0 errors and 2 warnings
[javacup] 47 terminals, 49 non-terminals, and 100 productions declared,
[javacup] producing 153 unique parse states.
[javacup] 2 terminals declared but not used.
[javacup] 0 non-terminals declared but not used.
[javacup] 0 productions never reduced.
[javacup] 0 conflicts detected (0 expected).
[javacup] Code written to &quot;Parser.java&quot;, and &quot;ParserSym.java&quot;.
[javacup] ---------------------------------------------------- (v0.10k)

def:
[xomgen] Writing src\main\mondrian\xom\meta.dtd
[xomgen] Writing src\main\mondrian\xom\MetaDef.java
[xomgen] Done
[xomgen] Writing src\main\mondrian\olap\mondrian.dtd
[xomgen] Writing src\main\mondrian\olap\MondrianDef.java
[xomgen] Done
[xomgen] Writing src\main\mondrian\resource\Resource.dtd
[xomgen] Writing src\main\mondrian\resource\ResourceDef.java
[xomgen] Done

compile.java:
[javac] Compiling 164 source files to C:\mondrian\classes

compile.jsp.maybe:

compile:

BUILD SUCCESSFUL
Total time: 35 seconds</pre>
</blockquote>

<h3><a name="4_3_Connect_to_the_Perforce_source_code_server">4.3. Connect to the 
Perforce source-code server</a></h3>

<p>If you are a mondrian developer, and need to access the latest source code 
and check in changes, you should connect to the Perforce source-code server:</p>
<ol>
  <li>Download the perforce client from
  <a href="http://www.perforce.com/perforce/loadprog.html">
  http://www.perforce.com/perforce/loadprog.html</a></li>
  <li>If you have Windows, start the perforce UI (P4Win). (If you are not 
  running windows, you will have to use the command-line interface to do the 
  following; 'p4 help' should get you started.)</li>
  <li>Choose <code>Settings</code> &gt; <code>Switch Port Client User...</code>; 
  the following dialog appears.<blockquote>
    <p><img border="0" src="perforce_setup.gif" width="424" height="258"> </p>
  </blockquote>
  </li>
  <li>Set <code>Port</code> to <code>66.123.172.226:1666</code>; set <code>User</code> 
  to your SourceForge username (for example, <code>jhyde</code>); set <code>
  Client</code> to your username plus the name of your machine (for example,
  <code>jhyde.notebook</code>).</li>
  <li>Choose <code>ClientSpec</code> &gt; <code>New...</code> and create a client 
  with the same name. Set its root to something like 'C:\' or 'D:\work', and 
  view specification of<blockquote>
    <pre>//open/mondrian/... //&lt;&lt;clientname&gt;&gt;/mondrian/...</pre>
  </blockquote>
  </li>
  <li>Sync to head revision.</li>
  <li>Build the code, as described
  <a href="#4_2_Download_the_latest_source_release">above</a>.</li>
  <li>
  If you intend to check-in changes to the perforce server,
  <a href="mailto:jhyde@users.sourceforge.net?subject=Can I please have access to the Perforce server?">
  email me</a> the name of the perforce user so I can give you write access to 
  the perforce depot.</li>
</ol>

<h2><a name="5_Load_the_database">5. Load the database</a></h2>
<p>First, get the dataset. If you installed from a binary or source distribution, you will need to 
download a dataset: get <code>mondrian-data.zip</code> from <a href="http://sourceforge.net/projects/mondrian">
SourceForge</a>, and unzip it to <code> <i>${project.location}</i></code>. If you got your files from the Perforce 
server, you should already have the latest data files.</p>
<p>Now create a database. How you create and load the database depends upon 
which database you are using.</p>
<p><i>(Did these instructions work for you? Have you managed to get mondrian 
working on other databases/versions? Please 
<a href="mailto:jhyde@users.sourceforge.net">let me know</a>.)</i></p>

<h3><a name="5_1_Microsoft_Access">5.1. Microsoft Access</a></h3>
<p>Start ODBC Administrator, and create a System ODBC DSN called <code>MondrianFoodMart</code> pointing to 
<code><i>${project.location}</i>/demo/access/MondrianFoodMart.mdb</code>.
    The JDBC connect string will be <code>jdbc:odbc:MondrianFoodMart</code>.</p>
<h3><a name="5_2_Oracle">5.2. Oracle</a></h3>
<p>Version 8.1.7 or higher.</p>
<p>Create the dataset by importing <code>${project.location}/demo/oracle/FoodMart.dmp</code>:<blockquote>

<pre>$ <b>sqlplus system/manager</b>
SQL> <b>create user foodmart identified by foodmart;</b>

User created.

SQL> <b>grant connect, resource to foodmart;</b>

Grant succeeded.

SQL> <b>exit</b>
Disconnected from Oracle8i Enterprise Edition Release 8.1.7.3.0 - Production
With the Partitioning option
JServer Release 8.1.7.3.0 - Production
$ <b>imp foodmart/foodmart touser=foodmart file=C:/mondrian/demo/oracle/FoodMart.dmp</b>

Import: Release 8.1.7.3.0 - Production on Mon Aug 5 11:37:35 2002

(c) Copyright 2000 Oracle Corporation.  All rights reserved.


Connected to: Oracle8i Enterprise Edition Release 8.1.7.3.0 - Production
With the Partitioning option
JServer Release 8.1.7.3.0 - Production

Export file created by EXPORT:V08.01.07 via conventional path
import done in WE8ISO8859P1 character set and WE8ISO8859P1 NCHAR character set
. importing FOODMART's objects into FOODMART
. . importing table                     "customer"      10281 rows imported
. . importing table                         "days"          7 rows imported
. . importing table          "inventory_fact_1997"       4070 rows imported
. . importing table          "inventory_fact_1998"       7282 rows imported
. . importing table                      "product"       1560 rows imported
. . importing table                "product_class"        110 rows imported
. . importing table                    "promotion"       1864 rows imported
. . importing table                       "region"        110 rows imported
. . importing table              "sales_fact_1997"      86837 rows imported
. . importing table              "sales_fact_1998"     164558 rows imported
. . importing table          "sales_fact_dec_1998"      18325 rows imported
. . importing table                        "store"         24 rows imported
. . importing table                  "time_by_day"        730 rows imported
. . importing table                    "warehouse"         24 rows imported
. . importing table              "warehouse_class"          6 rows imported
Import terminated successfully without warnings.</pre>
</blockquote></p>

<p>Note: the schema in <code>FoodMart.dmp</code> was created by running <code>demo/oracle/FoodMartTables.sql</code>, <code>demo/FoodMartData.sql</code>, then <code>demo/oracle/FoodMartIndexes.sql</code> in SQLPlus. To avoid straining my rollback segment, I used the SQLPlus command <code>set autocommit 100</code>.</p>

<p>Setup your environment as follows:</p>
<ol>
  <li>Set <code>ORACLE_HOME</code> in <code>build.bat</code>, or in your 
  environment.</li>
  <li>Append <code>%ORACLE_HOME%/jdbc/lib/classes12.zip</code> to <code>
  CLASSPATH</code> in <code>build.bat</code>, or in your environment.</li>
  <li>In <code>build.xml</code>, set the properties
  <code>mondrian.foodmart.jdbcURL</code> and
  <code>mondrian.foodmart.jdbcURL.oracle</code>. They should probably include a username and 
  password, for example <code>jdbc:oracle:oci8:foodmart/foodmart@myoracle</code>.</li>
  <li>Make sure that the <code>JdbcDrivers</code> property of the connect string includes <code>oracle.jdbc.OracleDriver</code>.</li>
</ol>

<h3><a name="5_3_hsqldb">5.3. Hypersonic SQL (hsqldb)</a></h3>
<p>Create and populate the schema  by running the scripts <code>FoodMartTables.sql</code>,
    <code>FoodMartData.sql</code> and <code>FoodMartIndexes.sql</code> in <code>${project.location}/demo/</code>.</p>
<h3><a name="5_4_MySQL">5.4. MySQL</a></h3>
<p>First, <a href="#MySQL">install MySQL</a>. Then
<a href="http://www.mysql.com/doc/en/Adding_users.html">create a user</a> and a 
database:</p>
<blockquote>
  <pre>C:\mysql\bin&gt; <b>mysql</b>
mysql&gt; <b>GRANT ALL PRIVILEGES ON *.* TO foodmart@localhost
    </b>-&gt;<b> IDENTIFIED BY 'foodmart';</b>
Query OK, 0 rows affected (0.06 sec)

mysql&gt; <b>create database foodmart;
</b>Query OK, 1 row affected (0.00 sec)

mysql&gt; <b>use foodmart</b>
Database changed

mysql&gt; <b>connect foodmart</b>
Connection id: 5
Current database: foodmart</pre>
</blockquote>
<p>Change the datasets for MySQL syntax:</p>
<ul>
  <li>Change all <code>varchar</code> 
        columns in <code>FoodMartTables.sql</code> to
        <code>varchar(30)</code></li>
  <li>Change all
        <code>false</code>/<code>true</code> values in <code>
        FoodMartData.sql</code> to <code>0</code>/<code>1</code>.</li>
</ul>
<p>Create the tables, load the data, run sanity checks, create indexes:</p>
<blockquote>
  <pre>mysql&gt; <b>source c:/mondrian/demo/FoodMartTables.sql
</b>Query OK, 1 row affected (0.00 sec)
(15 times)

mysql&gt; <b>source c:/mondrian/demo/FoodMartData.sql</b>
Query OK, 1 row affected (0.00 sec)
(295,789 times)

mysql&gt; <b>commit;
</b>Query OK, 0 rows affected (0.00 sec)

mysql&gt; <b>show tables;
</b>+---------------------+
| Tables_in_foodmart  |
+---------------------+
| customer            |
| days                |
| inventory_fact_1997 |
| inventory_fact_1998 |
| product             |
| product_class       |
| promotion           |
| region              |
| sales_fact_1997     |
| sales_fact_1998     |
| sales_fact_dec_1998 |
| store               |
| time_by_day         |
| warehouse           |
| warehouse_class     |
+---------------------+
15 rows in set (0.02 sec)

mysql&gt; <b>select * from days;
</b>+------+-----------+
| day  | week_day  |
+------+-----------+
| 1    | Sunday    |
| 2    | Monday    |
| 5    | Thursday  |
| 4    | Wednesday |
| 3    | Tuesday   |
| 6    | Friday    |
| 7    | Saturday  |
+------+-----------+
7 rows in set (0.06 sec)

mysql&gt; <b>source c:/mondrian/demo/FoodMartIndexes.sql</b>
Query OK, 10281 rows affected (0.63 sec)
Records: 10281 Duplicates: 0 Warnings: 0
...

mysql&gt; <b>select customer.gender as c0,
</b>-&gt; <b>sum(sales_fact_1997.unit_sales) as c1,
</b>-&gt; <b>sum(sales_fact_1997.store_sales) as c2
</b>-&gt; <b>from customer customer,
</b>-&gt; <b>sales_fact_1997 sales_fact_1997
</b>-&gt; <b>where sales_fact_1997.customer_id = customer.customer_id
</b>-&gt; <b>group by customer.gender</b>;
+------+--------+-----------+
| c0   | c1     | c2        |
+------+--------+-----------+
| F    | 131558 | 280226.21 |
| M    | 135215 | 285011.92 |
+------+--------+-----------+
2 rows in set (9 min 45.88 sec)

mysql&gt; <b>exit</b></pre>
</blockquote>

<p>In build.xml, set the property <code>
  mondrian.foodmart.jdbcURL</code>. A typical value is <code>
jdbc:mysql://localhost/foodmart?user=root&amp;password=</code>, but because the 
value is in an xml file, you will have to escape the '&amp;' as '&amp;#38;', for 
example:</p><blockquote>

<pre>&lt;property name=&quot;mondrian.foodmart.jdbcURL&quot;
    value=&quot;jdbc:mysql://localhost/foodmart?user=root&amp;#38;password=&quot;/&gt;</pre>
    
</blockquote>
<h3><a name="5_5_PostgreSQL">5.5. PostgreSQL</a></h3>
<p>As <a href="#5_3_hsqldb">hsqldb</a>, except for the following.</p>
<p>In <code>
        FoodMartTables.sql</code>, change <code>DOUBLE</code> to <code>DOUBLE
    PRECISION</code>, and <code>BIT</code> to <code>SMALLINT</code>.</p>

<h3><a name="5_6_IBM_DB2">5.6. IBM DB2</a></h3>

<p>There are unconfirmed reports of mondrian running on DB2. If you have 
succeeded, please 
<a href="mailto:jhyde@users.sourceforge.net">let me know</a>.</p>

<h2><a name="6_Run_the_test_suite">6. Running the test suite</a></h2>
<p>In a build environment,</p>
<blockquote>
  <pre>cd <i>${project.location}</i>
build test</pre>
</blockquote>
<p>In a runtime environment,</p>
<blockquote>
  <pre>cd <i>${project.location}</i>/bin
mondrian test</pre>
</blockquote>
<h2><a name="8_Run_the_web_app">7. Run the web app</a></h2>
<ol>
  <li>First <a href="#Tomcat">install Tomcat</a>.</li>
  <li>Make sure the values in <code>mondrian.properties</code> are correct for your environment. In particular:<ul>
    <li>Make sure your database's JDBC driver appears in the <code>JdbcDrivers</code> property of your connect string</li>
    <li>Check the catalog URL in <code>mondrian.test.connectString</code> and
    <code>mondrian.foodmart.catalogURL</code></li>
    <li>Check the JDBC connect strings in <code>mondrian.test.connectString</code> 
    and <code>mondrian.foodmart.jdbcURL</code>.</li>
  </ul>
  </li>
  <li>Run <code>build deploy-webapp</code> (or <code>mondrian deploy-to-tomcat</code>, 
  if this is a a runtime environment).</li>
  <li>Start up tomcat. (If this is a build environment, <code>build start.tomcat</code> is an easy way to do this.)</li>
  <li>Hit <a href="http://localhost:8080/mondrian" target="_new">http://localhost:8080/mondrian</a>.</li>
</ol>
<h2><a name="8_Miscellaneous">8. Miscellaneous</a></h2>
<h3><a name="8_1_Coding_guidelines">8.1. Coding guidelines</a></h3>
<ul>
  <li>Indentation 4.</li>
  <li>Tab stop 4.</li>
  <li>Use tabs, not space.</li>
  <li>K&R bracing
convention (that is, open braces on the same line as the preceding 'if', 'else', 'while' statement or 'class' declaration).</li>
  <li>Use braces even for single-line blocks.</li>
  <li>Declare variables as near to
their first use as possible.</li>
  <li>Don't initialize variables with 'dummy' values just
to shut up the compiler.</li>
  <li>Try to keep lines shorter than 80 characters.</li>
  <li>Write Javadoc comments on
methods  in the present active ('Collects garbage.'), <em><font face="Verdana">not</font></em> 
  the imperative ('Collect
garbage.'), passive ('Garbage is collected.'), or future active ('Will collect 
  garbage.').</li>
  <li>When editing HTML documents, please don't use an editor which reformats the
HTML source (such as Word).</li>
</ul>

<h2><a name="Appendix_A_Product_installation_instructions">Appendix A. Product 
installation instructions</a></h2>

<p>These are the products I used to build mondrian. Install all of the products
marked 'required'. (I use <code>/</code>-es in paths because I am run MKS on
Windows 2000, and it makes things simpler.)</p>

<p>In the following, the symbol <code><i>${project.location}</i></code> means the root of your
source tree.</p>

<p>Where the instructions suggest setting an environment variable, it is often 
sufficient to edit the corresponding line in <code><i>${project.location}</i>/build.bat</code>.</p>

<table border="1" style="border-collapse: collapse" bordercolor="#111111" cellpadding="2" cellspacing="0">
  <tr>
    <th>Product</th>
    <th>Required?</th>
    <th>Version</th>
    <th>Comment</th>
  </tr>
  <tr>
    <td><a name="JDK">JDK</a></td>
    <td>Yes</td>
    <td>1.3 or later (I use version 1.4.1.)</td>
    <td>Available from <a href="http://developer.java.sun.com/" target="_blank">http://developer.java.sun.com/</a>.
      I downloaded <code>j2sdk-1_4_1-windows-i586.exe</code>, and extracted to <code>E:/j2sdk1.4.1</code>. Set
      <code>JAVA_HOME</code> to same.</td>
  </tr>
  <tr>
    <td><a name="Ant">Ant</a></td>
    <td>Yes</td>
    <td>1.5 or later&nbsp;</td>
    <td>I downloaded
<a href="http://jakarta.apache.org/builds/jakarta-ant/release/v1.5/bin/jakarta-ant-1.5-bin.zip">
jakarta-ant-1.5-bin.zip</a>,  extracted to <code>E:/jakarta-ant-1.5</code>, 
    and set <code>ANT_HOME</code> to the same.</td>
  </tr>
  <tr>
    <td><a name="Tomcat">Tomcat</a></td>
    <td>Yes</td>
    <td>4.0 or later (I use version 4.0.4)</td>
    <td>Available from <a href="http://jakarta.apache.org/tomcat" target="_blank">
    http://jakarta.apache.org/tomcat</a>. I downloaded <code>
    jakarta-tomcat-4.0.4.zip</code>,  extracted to <code>E:/jakarta-tomcat-4.0.4</code>, 
    and set <code>TOMCAT_HOME</code> to the same.</td>
  </tr>
  <tr>
    <td><a name="Jikes">Jikes</a></td>
    <td>No</td>
    <td>&nbsp;</td>
    <td>Available from <a href="http://oss.software.ibm.com/developerworks/opensource/jikes/" target="_blank">http://oss.software.ibm.com/developerworks/opensource/jikes/</a>.
      I <code>downloaded jikes-1.15-windows.zip</code>, and extracted <code>jikes.exe</code>
      to <code>C:/winnt/system32</code>. Then uncomment the relevant lines of <code><i>${project.location}</i>/build.properties</code>.</td>
  </tr>
  <tr>
    <td><a name="Xerces">Xerces</a></td>
    <td>&nbsp;</td>
    <td>1.4.1 or later</td>
    <td><code>xerces.jar</code> is included with Tomcat.</td>
  </tr>
  <tr>
    <td><a name="Xalan">Xalan</a></td>
    <td>Yes</td>
    <td>2.3.1 or later</td>
    <td>Available from <a href="http://xml.apache.org/xalan-j/" target="_blank">
    http://xml.apache.org/xalan-j/</a>. I downloaded <code>xalan-j_2_3_1-bin.zip</code>, 
    extracted to <code>E:/xalan-j_2_3_1</code>, and set <code>XALAN_HOME</code> 
    to the same.</td>
  </tr>
  <tr>
    <td><a name="JUnit">JUnit</a></td>
    <td>Yes</td>
    <td>3.7 or later</td>
    <td>Available from <a href="http://www.junit.org/">http://www.junit.org/</a>. I downloaded <code>
    junit3.7.zip</code>, 
    extracted to <code>E:/junit3.7</code>, and set <code>JUNIT_HOME</code> 
    to the same.</td>
  </tr>
  <tr>
    <td>Intellij IDEA (a Java IDE)</td>
    <td>No</td>
    <td>2.5.1</td>
    <td>You can download a 30-day evaluation copy from <a href="http://www.intellij.com/idea/" target="_blank">http://www.intellij.com/idea/</a>.
      Follow the instructions in <code>Install.txt</code> in <code>idea-2_5_1.zip</code>
      to there.
      <p>Create a project <code><i>${project.location}</i>/mondrian.ipr</code>.
      Set the compiler output path to <code><i>${project.location}</i>/classes/</code>.
      Add <code>javacup.jar</code> and <code>xerces.jar</code>
      in <code><i>${project.location}</i>/lib/</code> to the class
      path.</p>
      <p>To use Ant build, click the '6: Ant Build' tab, click '+', choose <code><i>${project.location}</i>/build.xml</code>, then right-click, choose
      'Properties', and choose 'Include project classpath'. (<code>javacup.jar</code> 
      is needed in order to build the <code>parser</code> target.)</td>
  </tr>
  <tr>
    <td><a name="hsql">hsql</a> Database Engine</td>
    <td>No</td>
    <td>1.61</td>
    <td>
<p>Available from <a href="http://hsqldb.sourceforge.net/" target="_blank">http://hsqldb.sourceforge.net/</a>.
I extracted <code>hsqldb_v.1.61.zip</code> to <code>E:/hsqldb_v.1.61</code>,
then edited <code>bin/run.bat</code>. You will need to add <code>hsqldb.jar</code> 
to your classpath.</p>
    </td>
  </tr>
  <tr>
    <td><a name="MySQL">MySQL</a></td>
    <td>No</td>
    <td>3.23</td>
    <td>
Available from <a href="http://www.mysql.com/downloads/">
http://www.mysql.com/downloads/</a>. Install MySQL from the zip file. Then
<a href="http://www.mysql.com/doc/en/NT_start.html">install and start the 
service</a>:<blockquote>
  <pre><code>C:\mysql\bin&gt; mysqld-max-nt --install
Service successfully installed.
C:\mysql\bin&gt; net start mysql
The MySql service is starting.
The MySql service was started successfully.</code></pre>
</blockquote>
  <p>Download a <a href="http://www.mysql.com/doc/en/Java.html">JDBC driver</a>. 
  I downloaded
  <a href="http://www.mysql.com/downloads/api-jdbc-stable.html">MySQL
  Connector/J 2.0.14</a>; extracted <code>mysql-connector-java-2.0.14-bin.jar</code> to <code>
  <a href="file:///C:/MySQL/lib">C:\MySQL\lib</a></code> and appended it to my CLASSPATH (by editing <code>build.bat</code>); and appended <code>
  com.mysql.jdbc.Driver</code> to the <code>JdbcDrivers</code> property of my connect string. 
    </td>
  </tr>
  <tr>
    <td>PostgreSQL</td>
    <td>No</td>
    <td>?</td>
    <td>
?</td>
  </tr>
  <tr>
    <td>JavaCUP (parser generator)</td>
    <td>Included with source distribution, as <code>lib/javacup.jar</code>.&nbsp;</td>
    <td>v0.10g (with modifications)</td>
    <td>Available from <a href="http://www.cs.princeton.edu/~appel/modern/java/CUP/" target="_blank">http://www.cs.princeton.edu/~appel/modern/java/CUP/</a>.
      I modified version v.0.10g to add an Ant task, and to output error
      messages in a format which Emacs can parse.</td>
  </tr>
  <tr>
    <td><a name="Weblogic">Weblogic</a></td>
    <td>No</td>
    <td>6.1</td>
    <td>
    <ol>
      <li>Extract <code>xml-apis.jar</code> and <code>xercesImpl.jar</code> from
      <code>mondrian.war</code> and place them in <code>${weblogic.home}/lib</code>.</li>
      <li>Edit <code>startWeblogic.cmd</code>, or whichever script you use to 
      start Weblogic, and place <code>xml-apis.jar</code> and <code>
      xercesImpl.jar</code> before <code>weblogic.jar</code> on the class-path.</li>
    </ol>
    <p>See <a href="#Appendix_C_A_note_on_Weblogic_and_Xerces">note on Weblogic 
    and Xerces</a>.</td>
  </tr>
  </table>

<h2><a name="Appendix_B_How_to_debug_Tomcat_using_IntelliJ">Appendix B. How to debug 
Tomcat using IntelliJ</a></h2>
<ol>
  <li>add <code><i>${tomcat.home}</i>/webapps/mondrian.war</code> to intellij's 
  classpath</li>
  <li>edit <code><i>${tomcat.home}</i>/bin/catalina.bat</code> as follows:
  <blockquote>
<pre><code>:doJpda
if not &quot;%SECURITY_POLICY_FILE%&quot; == &quot;&quot; goto doSecurityJpda
%_EXECJAVA% %JAVA_OPTS% %CATALINA_OPTS% -Xdebug <i><b>-Xnoagent
 </b></i> -Xrunjdwp:transport=<i><b>dt_socket</b></i>,address=%JPDA_ADDRESS%,server=y,suspend=n %DEBUG_OPTS%
  -Djava.endorsed.dirs=&quot;%JAVA_ENDORSED_DIRS%&quot; -classpath &quot;%CLASSPATH%&quot;
  -Dcatalina.base=&quot;%CATALINA_BASE%&quot; -Dcatalina.home=&quot;%CATALINA_HOME%&quot;
  -Djava.io.tmpdir=&quot;%CATALINA_TMPDIR%&quot; %MAINCLASS% %CMD_LINE_ARGS% %ACTION%
goto end</code></pre>
  </blockquote>
  </li>
  <li>create <code><i>${tomcat.home}</i>/bin/setenv.bat</code> as follows:
  <blockquote>
<pre><code>set JPDA_ADDRESS=5000</code></pre>
  </blockquote>
  </li>
  <li><code>cd e:\jakarta-tomcat-4.0.3\bin</code></li>
  <li><code>catalina jpda run</code></li>
  <li>attach intellij's debugger to port 5000</li>
</ol>

<h2><a name="Appendix_C_A_note_on_Weblogic_and_Xerces">Appendix C. A note on 
Weblogic and Xerces</a></h2>
<p>Weblogic 6.1 ships with an older, incompatible, version of Xerces. The 
symptom is the error</p>
<blockquote>
  <pre>java.lang.VerifyError: (class: mondrian/xom/wrappers/XercesDOMParser,
 method: parse signature: (Lorg/xml/sax/InputSource;)Lorg/w3c/dom/Document;)
 Incompatible object argument for function call 
at java.lang.Class.forName0(Native Method) 
at java.lang.Class.forName(Class.java:120) 
at mondrian.xom.XOMUtil.createDefaultParser(XOMUtil.java:165) 
at mondrian.resource.Util.load(Util.java:49) 
...</pre>
</blockquote>
<p>The solution is to place <code>xml-apis.jar</code> and <code>xercesImpl.jar</code> 
before <code>weblogic.jar</code> on your class-path.</p>
<p>Generally, Mondrian uses whichever JAXP-compliant XML parser is provided by 
the system. Unfortunately Weblogic's parser cannot be set to non-validating 
mode, and Mondrian needs this. Therefore, in a Weblogic environment, Mondrian 
explicitly uses Xerces.&nbsp; Fyi,
<a href="http://xml.apache.org/soap/faq/faq-for-WL6.1beta.html">this note</a> 
describes how to change Weblogic's default XML parser.</p>

<hr>

<table border="0" class="clsStd" width="100%" style="border-collapse: collapse" bordercolor="#111111" cellpadding="0" cellspacing="0">
  <tr>
    <td class="content">
      <a target="_top" href="index.html">Home</a> |
      <a target="_top" href="#">No frames</a> | This file is<i>
      <a href="http://apoptosis.dyndns.org:8080/open/mondrian/doc/install.html">$Id$
      </a></i> (<a href="http://apoptosis.dyndns.org:8080/open/mondrian/doc/install.html?ac=22">log</a>)</td>
    <td align="right">
      <a href="http://sourceforge.net">
        <img src="http://sourceforge.net/sflogo.php?group_id=35302&type=1" width="88" height="31" border="0" alt="SourceForge.net Logo">
      </a>
    </td>
  </tr>
</table>
  
</body>

</html>
